{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/LeadForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Send, Loader2, CheckCircle } from \"lucide-react\";\n\nconst leadSchema = z.object({\n  name: z.string().min(2, \"Name is required\"),\n  email: z.string().email(\"Valid email is required\"),\n  phone: z.string().min(10, \"Valid phone number is required\"),\n  service: z.string().optional(),\n  message: z.string().optional(),\n  city: z.string().optional(),\n});\n\ntype LeadFormData = z.infer<typeof leadSchema>;\n\ninterface LeadFormProps {\n  className?: string;\n  preselectedService?: string;\n  preselectedCity?: string;\n}\n\nexport function LeadForm({ className = \"\", preselectedService, preselectedCity }: LeadFormProps) {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const {\n    register,\n    handleSubmit,\n    reset,\n    formState: { errors },\n  } = useForm<LeadFormData>({\n    resolver: zodResolver(leadSchema),\n    defaultValues: {\n      service: preselectedService || \"\",\n      city: preselectedCity || \"\",\n    },\n  });\n\n  const onSubmit = async (data: LeadFormData) => {\n    setIsSubmitting(true);\n    setError(null);\n\n    try {\n      const response = await fetch(\"/api/leads\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to submit form\");\n      }\n\n      setIsSuccess(true);\n      reset();\n    } catch (err) {\n      setError(\"Something went wrong. Please try again or call us directly.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (isSuccess) {\n    return (\n      <div className={`bg-white rounded-2xl p-8 shadow-xl ${className}`}>\n        <div className=\"text-center space-y-4\">\n          <CheckCircle className=\"w-16 h-16 text-green-500 mx-auto\" />\n          <h3 className=\"text-2xl font-bold text-primary\">Thank You!</h3>\n          <p className=\"text-muted-foreground\">\n            We've received your request and will contact you shortly.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`bg-white rounded-2xl p-8 shadow-xl ${className}`}>\n      <h3 className=\"text-2xl font-bold text-primary mb-2\">Get a Free Quote</h3>\n      <p className=\"text-muted-foreground mb-6\">\n        No hidden charges. Honest, flat-rate pricing.\n      </p>\n\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\n        <div>\n          <input\n            {...register(\"name\")}\n            type=\"text\"\n            placeholder=\"Your Name *\"\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition\"\n            data-testid=\"input-name\"\n          />\n          {errors.name && (\n            <p className=\"text-red-500 text-sm mt-1\">{errors.name.message}</p>\n          )}\n        </div>\n\n        <div>\n          <input\n            {...register(\"email\")}\n            type=\"email\"\n            placeholder=\"Email Address *\"\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition\"\n            data-testid=\"input-email\"\n          />\n          {errors.email && (\n            <p className=\"text-red-500 text-sm mt-1\">{errors.email.message}</p>\n          )}\n        </div>\n\n        <div>\n          <input\n            {...register(\"phone\")}\n            type=\"tel\"\n            placeholder=\"Phone Number *\"\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition\"\n            data-testid=\"input-phone\"\n          />\n          {errors.phone && (\n            <p className=\"text-red-500 text-sm mt-1\">{errors.phone.message}</p>\n          )}\n        </div>\n\n        <div>\n          <select\n            {...register(\"service\")}\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition bg-white\"\n            data-testid=\"select-service\"\n          >\n            <option value=\"\">Select a Service</option>\n            <option value=\"ac-repair\">AC Repair</option>\n            <option value=\"heating-repair\">Heating Repair & Maintenance</option>\n            <option value=\"ac-installation\">AC Installation</option>\n            <option value=\"other\">Other</option>\n          </select>\n        </div>\n\n        <div>\n          <textarea\n            {...register(\"message\")}\n            placeholder=\"Tell us about your needs...\"\n            rows={3}\n            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition resize-none\"\n            data-testid=\"textarea-message\"\n          />\n        </div>\n\n        <input type=\"hidden\" {...register(\"city\")} />\n\n        {error && (\n          <p className=\"text-red-500 text-sm\">{error}</p>\n        )}\n\n        <button\n          type=\"submit\"\n          disabled={isSubmitting}\n          className=\"w-full bg-accent hover:bg-accent/90 text-white font-bold py-4 px-6 rounded-lg transition-colors flex items-center justify-center gap-2 disabled:opacity-50\"\n          data-testid=\"button-submit-lead\"\n        >\n          {isSubmitting ? (\n            <>\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n              Sending...\n            </>\n          ) : (\n            <>\n              <Send className=\"w-5 h-5\" />\n              Request Quote\n            </>\n          )}\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}